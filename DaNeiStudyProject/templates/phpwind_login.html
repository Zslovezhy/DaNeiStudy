<!DOCTYPE html>
<!-- saved from url=(0051)http://47.107.116.139/phpwind/index.php?m=u&c=login -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>登录 - phpwind 9.0 - Powered by phpwind</title>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="generator" content="phpwind v9.0.2 20161021">
<meta name="description" content="">
<meta name="keywords" content="">
<link rel="stylesheet" href="./phpwind_login_files/core.css">
<link rel="stylesheet" href="./phpwind_login_files/style.css">
<!-- <base id="headbase" href="http://47.107.116.139/phpwind/" /> -->
<script>
//全局变量 Global Variables
var GV = {
	JS_ROOT : 'http://47.107.116.139/phpwind/res/js/dev/',										//js目录
	JS_VERSION : '20161021',											//js版本号(不能带空格)
	JS_EXTRES : 'http://47.107.116.139/phpwind/themes/extres',
	TOKEN : 'd073004fba6bdb94',	//token $.ajaxSetup data
	U_CENTER : 'http://47.107.116.139/phpwind/index.php?m=space',		//用户空间(参数 : uid)
	U_AVATAR_DEF : 'http://47.107.116.139/phpwind/res/images/face/face_small.jpg',					//默认小头像
	U_ID : parseInt('0'),									//uid
	REGION_CONFIG : '',														//地区数据
	CREDIT_REWARD_JUDGE : '',			//是否积分奖励，空值:false, 1:true
	URL : {
		LOGIN : 'http://47.107.116.139/phpwind/index.php?m=u&c=login',										//登录地址
		QUICK_LOGIN : 'http://47.107.116.139/phpwind/index.php?m=u&c=login&a=fast',								//快速登录
		IMAGE_RES: 'http://47.107.116.139/phpwind/res/images',										//图片目录
		CHECK_IMG : 'http://47.107.116.139/phpwind/index.php?m=u&c=login&a=showverify',							//验证码图片url，global.js引用
		VARIFY : 'http://47.107.116.139/phpwind/index.php?m=verify&a=get',									//验证码html
		VARIFY_CHECK : 'http://47.107.116.139/phpwind/index.php?m=verify&a=check',							//验证码html
		HEAD_MSG : {
			LIST : 'http://47.107.116.139/phpwind/index.php?m=message&c=notice&a=minilist'							//头部消息_列表
		},
		USER_CARD : 'http://47.107.116.139/phpwind/index.php?m=space&c=card',								//小名片(参数 : uid)
		LIKE_FORWARDING : 'http://47.107.116.139/phpwind/index.php?c=post&a=doreply',							//喜欢转发(参数 : fid)
		REGION : 'http://47.107.116.139/phpwind/index.php?m=misc&c=webData&a=area',									//地区数据
		SCHOOL : 'http://47.107.116.139/phpwind/index.php?m=misc&c=webData&a=school',								//学校数据
		EMOTIONS : "http://47.107.116.139/phpwind/index.php?m=emotion&type=bbs",					//表情数据
		CRON_AJAX : '',											//计划任务 后端输出执行
		FORUM_LIST : 'http://47.107.116.139/phpwind/index.php?c=forum&a=list',								//版块列表数据
		CREDIT_REWARD_DATA : 'http://47.107.116.139/phpwind/index.php?m=u&a=showcredit',					//积分奖励 数据
		AT_URL: 'http://47.107.116.139/phpwind/index.php?c=remind',									//@好友列表接口
		TOPIC_TYPIC: 'http://47.107.116.139/phpwind/index.php?c=forum&a=topictype'							//主题分类
	}
};
</script>
<script src="./phpwind_login_files/wind.js.下载"></script>
<link href="./phpwind_login_files/register.css" rel="stylesheet"><script type="text/javascript" src="./phpwind_login_files/jquery.js.下载"></script><script type="text/javascript" src="./phpwind_login_files/global.js.下载"></script><script type="text/javascript" src="./phpwind_login_files/validate.js.下载"></script><script type="text/javascript" src="./phpwind_login_files/ajaxForm.js.下载"></script>
</head>
<body>
<div class="wrap">
<header class="header_wrap">
	<div id="J_header" class="header cc">
		<div class="logo">
			<a href="http://47.107.116.139/phpwind/">
								<img src="./phpwind_login_files/logo.png" alt="phpwind 9.0">
							</a>
		</div>
		<nav class="nav_wrap">
			<div class="nav">
				<ul>
						<li class=""><a href="http://47.107.116.139/phpwind/index.php?m=bbs">论坛</a></li>
						<li class=""><a href="http://47.107.116.139/phpwind/index.php?m=bbs&amp;c=forumlist">版块</a></li>
						<li class=""><a href="http://47.107.116.139/phpwind/index.php?m=like&amp;c=like">喜欢</a></li>
						<li class=""><a href="http://47.107.116.139/phpwind/index.php?m=tag">话题</a></li>
						<li class="current"></li>
					</ul>
			</div>
		</nav>
				<div class="header_search" role="search">
			<form action="http://47.107.116.139/phpwind/index.php?m=search&amp;c=s" method="post">
				<input type="text" id="s" aria-label="搜索关键词" accesskey="s" placeholder="搜索其实很简单" x-webkit-speech="" speech="" name="keyword">
				<button type="submit" aria-label="搜索"><span>搜索</span></button>
			<input type="hidden" name="csrf_token" value="d073004fba6bdb94"></form>
		</div>
		<div class="header_login">
	<a rel="nofollow" href="http://47.107.116.139/phpwind/index.php?m=u&amp;c=login">登录</a><a rel="nofollow" href="http://47.107.116.139/phpwind/index.php?m=u&amp;c=register">注册</a>
</div>

	</div>
</header>
<div class="tac"> </div>
	<div class="main_wrap">
		<div class="box_wrap register cc">
			<h2 class="reg_head">登录</h2>
			<div class="reg_cont_wrap">
				<div class="reg_cont">
					<form id="J_u_login_form" action="http://47.107.116.139/phpwind/index.php?m=u&amp;c=login&amp;a=dorun" method="post">
					<div class="reg_form">
												<div class="tips"><span class="tips_icon">请登录后再继续浏览</span></div>
												<dl class="cc current">
							<dt><label for="J_u_login_username">帐号：</label></dt>
							<dd><input id="J_u_login_username" data-id="username" name="username" type="text" class="input length_4" aria-required="true" value=""></dd>
							<dd id="J_u_login_tip_username" role="tooltip" aria-hidden="true" class="dd_r"><span class="reg_tips" data-text="text">用户名</span></dd>
						</dl>
						<dl class="cc">
							<dt><label for="J_u_login_password">密码：</label></dt>
							<dd><input id="J_u_login_password" data-id="password" name="password" type="password" aria-required="true" class="input length_4" value=""></dd>
							<dd class="dd_r">
								<span id="J_u_login_tip_password" role="tooltip" aria-hidden="true"></span>
							</dd>
						</dl>
						<div id="J_login_qa" style="display:none;"></div>
												<dl class="cc pick">
							<dt>&nbsp;</dt>
							<dd><a rel="nofollow" href="http://47.107.116.139/phpwind/index.php?m=u&amp;c=findPwd" class="fr mr10">找回密码</a><input name="rememberme" value="31536000" type="checkbox" class="checkbox" id="cktime"><label for="cktime">自动登录</label></dd>
						</dl>
						<dl class="cc">
							<dt>&nbsp;</dt>
							<dd><button class="btn btn_big btn_submit mr20" type="submit">登录</button>
							<input type="hidden" name="backurl" value="http://47.107.116.139/phpwind/">
							<input type="hidden" name="invite" value="">
							</dd>
						</dl>
					</div>
					<input type="hidden" name="csrf_token" value="d073004fba6bdb94"></form>
				</div>
			</div>
			<div class="reg_side">
				<div class="reg_side_cont">
					<p class="mb10">还没有帐号？</p>
					<p class="mb20"><a rel="nofollow" href="http://47.107.116.139/phpwind/index.php?m=u&amp;c=register" class="btn btn_big">免费注册</a></p>
									</div>
			</div>
		</div>
	</div>
<!--.main-wrap,#main End-->
<div class="tac">
 <br>
 
</div>
<div class="footer_wrap">
	<div class="footer">
		<pw-drag id="footer_segment">
		<div class="bottom">
		<a href="http://phpwind.com/about.html">关于phpwind</a><a href="http://phpwind.com/contact.html">联系我们</a><a href="http://www.phpwind.net/thread-htm-fid-39.html">程序建议</a><a href="http://www.phpwind.net/thread-htm-fid-54.html">问题反馈</a>		</div>
		<p>Powered by <a href="http://www.phpwind.net/" target="_blank" rel="nofollow">phpwind v9.0.2</a> ©2003-2015 <a href="http://www.phpwind.com/" target="_blank" rel="nofollow">phpwind.com</a> <a href="http://www.miitbeian.gov.cn/" target="_blank" rel="nofollow"></a></p>
		<p></p>
	</pw-drag></div>
	 
	 
	 
	<div id="cloudwind_common_bottom"></div>
	</div>

<!--返回顶部-->
<a href="http://47.107.116.139/phpwind/index.php?m=u&amp;c=login#" rel="nofollow" role="button" id="back_top" tabindex="-1">返回顶部</a>

</div>
<script>
Wind.use('jquery', 'global', 'validate', 'ajaxForm', function(){
	
	//聚焦时默认提示
	var focus_tips = {
		username : '用户名',
		password : '',
		answer : '',
		myquestion : '',
		code : ''
	};

	var login_qa = $('#J_login_qa'), $qa_html = $('<dl id="J_qa_wrap" class="cc"><dt><label for="J_login_question">安全问题</label></dt><dd><select id="J_login_question" name="question" class="select_4"></select></dd></dl><dl class="cc"><dt><label for="J_login_answer">您的答案</label></dt><dd><input id="J_login_answer" name="answer" type="text" class="input length_4" value=""></dd><dd id="J_u_login_tip_answer" class="dd_r"></dd></dl>');
	var _statu = '',
		login_tip_username = $('#J_u_login_tip_username');

	var u_login_form = $("#J_u_login_form"),
			u_login_username = $('#J_u_login_username');

	u_login_form.validate({
		errorPlacement: function(error, element) {
			//错误提示容器
			$('#J_u_login_tip_'+ element[0].name).html(error);
		},
		errorElement: 'span',
		errorClass : 'tips_icon_error',
		validClass		: 'tips_icon_success',
		onkeyup : false, //remote ajax
		focusInvalid : false,
		rules: {
			username: {
				required	: true,
				//nameCheck : true
				remote		: {
					url : 'http://47.107.116.139/phpwind/index.php?m=u&c=login&a=checkname',
					//beforeSend : '', //取消startRequest方法
					dataType: "json",
					type : 'post',
					data : {
						'username' : function(){
							return u_login_username.val();
						}
					},
					complete : function(jqXHR, textStatus){
						if(!textStatus === 'success') {
							return false;
						}
						var data = $.parseJSON(jqXHR.responseText);
						if(data.state === 'success') {
							if(data.message.safeCheck){
								var q_arr = [];
								$.each(data.message.safeCheck, function(i, o){
									q_arr.push('<option value="'+ i +'">'+ o +'</option>')
								});
								$qa_html.find('#J_login_question').html(q_arr.join(''));
								login_qa.html($qa_html).show();
								_statu = data.message._statu;
							}else{
								login_qa.html('')
							};
							login_tip_username.html('<span class="tips_icon_success"><span>');
						}else{
							login_tip_username.html('<span class="tips_icon_error"><span>' + data.message);
						}
					}
				}
			},
			password : {
				required	: true/*,
				remote : {
					url : "http://47.107.116.139/phpwind/index.php?m=u&c=login&a=checkpwd",
					dataType: "json",
					type : 'post',
					data : {
						username :  function(){
							return u_login_username.val();
						},
						password : function(){
							return $('#J_u_login_password').val();
						}
					}
				}*/
            },
            /*
			code : {
				required : true,
				remote : {
					url : "http://47.107.116.139/phpwind/index.php?m=verify&a=check",
					dataType: "json",
					data : {
						code :  function(){
							return $("#J_login_code").val();
						}
					},
                    complete:function(jqXHR, textStatus){
                        if(!textStatus === 'success') {
							return false;
						}
                        var data = $.parseJSON(jqXHR.responseText);
                        if( data.state!="success" ) {
                            $('#J_verify_update_a').click();
                        }
                    },
				}
			},
            */
            question : {
				required : true
			},
			answer : {
				required : true,
				remote : {
					url : 'http://47.107.116.139/phpwind/index.php?m=u&c=login&a=checkquestion',
					dataType: "json",
					type : 'post',
					ignoreRepeat : true,
					data : {
						question : function(){
							if($('#J_login_myquestion').length) {
								return $('#J_login_myquestion').val();
							}else{
								return $('#J_login_question').val();
							}
						},
						answer :  function(){
							return $("#J_login_answer").val();
						},
						_statu : function(){
							return _statu;
						}
					}
				}
			}
		},
		highlight	: false,
		unhighlight	: function(element, errorClass, validClass) {
			if(element.name === 'password') {
				$('#J_u_login_tip_password').html('');
				return;
			}
			//$('#J_u_login_tip_'+ $(element).data('id')).html('<span class="'+ validClass +'" data-text="text"><span>');
		},
		onfocusin	: function(element){
			var name = element.name;
			$(element).parents('dl').addClass('current');
			$('#J_u_login_tip_'+ name).html('<span class="reg_tips" data-text="text">'+ focus_tips[name] +'</span>');
		},
		onfocusout	:  function(element){
			$(element).parents('dl').removeClass('current');
			//$('#J_u_login_tip_'+ $(element).data('id')).html('');
			if(element.name === 'username'){
				this.element(element);
			}
		},
		messages : {
			username : {
				required	: '帐号不能为空'
			},
			password : {
				required : '密码不能为空'
			},
			code : {
				required	: '验证码不能为空',
				remote : '验证码不正确或已过期' //ajax验证默认提示
			},
			myquestion : {
				required	: '自定义问题不能为空',
				remote : ''
			},
			answer : {
				required	: '问题答案不能为空'
			}
		},
		submitHandler:function(form) {
			var btn = $(form).find('button:submit');
			
			$(form).ajaxSubmit({
				dataType : 'json',
				beforeSubmit : function(){
					//global.js
					Wind.Util.ajaxBtnDisable(btn);
				},
				success : function(data, statusText, xhr, $form) {
					if(data.state === 'success') {
					
						//是否需要设置验证问题
						if(data.message.check) {
                            data.message.check.url=(data.message.check.url).replace(/&amp;/gm,'&');
							$.post(data.message.check.url, function (data) {
								//引入所需组件并显示弹窗
								Wind.use('dialog', function (){
									Wind.Util.ajaxBtnEnable(btn);
									Wind.dialog.html(data, {
										id: 'J_login_question_wrap',
										isDrag: true,
										isMask: false,
										onClose: function(){
											u_login_username.focus();
										},
										callback: function(){
											$('#J_login_question_wrap input:text:visible:first').focus();
										}
									});

								});
							}, 'html');
						}else{
							window.location.href = decodeURIComponent(data.referer);
						}
						
					}else if(data.state === 'fail'){
                        //刷新验证码
						$('#J_verify_update_a').click();
                        //global.js
						Wind.Util.ajaxBtnEnable(btn);

						if(data.message.qaE) {
							//回答安全问题
							return;
						}
						
						if(RegExp('答案').test(data.message)) {
							//配合ignoreRepeat 处理问题答案不修改 再次验证
							$('#J_u_login_tip_answer').html('<span for="J_login_answer" generated="true" class="tips_icon_error">'+ data.message +'</span>');
						}else{
							//global.js
							Wind.Util.resultTip({
								elem : btn,
								error : true,
								msg : data.message,
								follow : true
							});
						}
						
					}
				}
			});
		}
	});

	u_login_form.on('change', '#J_login_question', function(){
		if($(this).val() == '-4') {
			$('#J_qa_wrap').after('<dl id="J_myquestion_wrap" class="cc"><dt><label>自定义问题</label></dt><dd><input id="J_login_myquestion" type="text" name="myquestion" value="" class="input length_4"></dd><dd class="dd_r" id="J_u_login_tip_myquestion"></dd></dl>');
		}else{
			$('#J_myquestion_wrap').remove();
		}
	});


	//聚焦第一个input
	u_login_form.find('input.input:visible:first').focus();

});
</script>


</body></html>